function from_validation(){var a=jQuery("[happs-curr-from]").attr("happs-curr-from"),a=jQuery("[data-list=happs-from] [data-value-1="+a+"]");return[a.attr("data-f"),a.attr("data-mf"),a.attr("data-ma")]}function check_fee_type(a){return a.includes("%")?"%":"fix"}function happs_calc(){var a=jQuery("[happs-curr-from]").attr("happs-curr-from"),e=jQuery("[happs-curr-to]").attr("happs-curr-to"),r=jQuery("#hayyatapps-amount").val(),t=r=FORMAT_SYM(r),u=from_validation()[0],n=from_validation()[1];if(r<from_validation()[2])return jQuery("#msg-min-amount").css("color","red"),jQuery(".happs-buy-details,.take-order-btn-happs").hide(),0;jQuery("#msg-min-amount").css("color","black"),jQuery(".happs-buy-details,.take-order-btn-happs").show(),o="USD"==a?jQuery("#RATE-"+e).val():FORMAT_SYM(jQuery("#RATE-"+e).val())/FORMAT_SYM(jQuery("#RATE-"+a).val());var p=check_fee_type(u);fee_formated=FORMAT_SYM(u),"%"==p?(u=r*fee_formated/100)<FORMAT_SYM(n)&&(u=FORMAT_SYM(n)):(u=fee_formated)<FORMAT_SYM(n)&&(u=FORMAT_SYM(n));var n=1/o*(r-=u),r=a+"/"+e,o=FORM_NUM(1/o),u=a+" "+u.toFixed(2),n=e+" "+FORM_NUM(n);jQuery("#exchange_symb_happs").text(r),jQuery("#ex-rate-happs").text(o),jQuery("#fee-happs").text(u),jQuery("#get-happs").text(n),jQuery("#buy-happs").text("( "+n+" )"),jQuery("input[name=hidden-calc-from]").val(a),jQuery("input[name=hidden-calc-to]").val(e),jQuery("input[name=hidden-calc-amount]").val(t),jQuery("input[name=hidden-calc-rate]").val(o),jQuery("input[name=hidden-calc-fee]").val(u),jQuery("input[name=hidden-calc-getamount]").val(n)}function happs_run_validation(){var a=jQuery("[happs-curr-from]").attr("happs-curr-from"),e=from_validation()[2],r="Enter ("+a+")";jQuery("#hayyatapps-amount").attr("placeholder",r),jQuery("#msg-min-amount").html("Min:<b> "+e+" "+a+"</b>")}jQuery(document).on("change","[happs-curr-from]",function(){jQuery("#hayyatapps-amount").val(""),happs_run_validation()}),happs_run_validation(),jQuery(document).on("click",".take-order-btn-happs",function(){happs_calc();var a=jQuery(this).attr("happs-redirect-user"),e=jQuery(this).attr("happs-redirect-url"),r="from="+jQuery("input[name=hidden-calc-from]").val()+"&to="+jQuery("input[name=hidden-calc-to]").val()+"&amount="+jQuery("input[name=hidden-calc-amount]").val()+"&rate="+jQuery("input[name=hidden-calc-rate]").val()+"&fee="+jQuery("input[name=hidden-calc-fee]").val()+"&get="+jQuery("input[name=hidden-calc-getamount]").val();if("1"==a)return window.open(e+"?"+r,"_self"),0;jQuery("#take-order-form-happs").show("slow")});